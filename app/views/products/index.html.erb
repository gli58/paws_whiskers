<h1 class="my-4">Pet Supplies</h1>

<div class="search-bar">
  <%= form_with url: products_path, method: :get, local: true, class: 'row g-3' do |f| %>
    <div class="col-md-5">
      <%= f.text_field :search, placeholder: "Search products...", value: params[:search], class: 'form-control' %>
    </div>

    <div class="col-md-4">
      <%= f.select :category_id,
          options_from_collection_for_select(@categories, :id, :name, params[:category_id]),
          { include_blank: "All Categories" },
          class: 'form-select' %>
    </div>

    <div class="col-md-3">
      <%= f.submit "Search", class: 'btn btn-primary w-100' %>
    </div>
  <% end %>
</div>

<div class="filter-buttons mb-4">
  <%= link_to "All Products", products_path, class: "btn btn-outline-primary" %>
  <%= link_to "On Sale", products_path(on_sale: true), class: "btn btn-outline-danger" %>
  <%= link_to "New Arrivals", products_path(new: true), class: "btn btn-outline-info" %>
  <%= link_to "Recently Updated", products_path(recently_updated: true), class: "btn btn-outline-warning" %>
</div>

<div class="row">
  <% if @products.any? %>
    <% @products.each do |product| %>
      <%= render 'shared/product_card', product: product %>
    <% end %>
  <% else %>
    <div class="col-12">
      <div class="alert alert-info">No products found.</div>
    </div>
  <% end %>
</div>

<div class="d-flex justify-content-center mt-4">
  <%= paginate @products %>
</div>